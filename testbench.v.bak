`timescale 1ns/1ps
module cputest;
reg  clock,reset;
s_cycle_cpu CPU(
    .clock(clock),
    .reset(reset)
);
initial begin
  clock=0;
  forever begin
    #5 clock=~clock;
  end
end
always @(posedge clock) begin
    if(reset)begin
   // $display("time=%3d",$time);
    //$display("");
    end
end
//导入指令，初始化寄存器
integer i;
initial
begin
    $readmemh("code.txt",CPU.IM.ins_memory);
    for (i=0;i<32 ;i=i+1) begin
        CPU.GPR.gp_registers[i]=i;
    end
end

//产生reset信号
initial begin
    reset=1;
    #5 reset=0;
    #20 reset=1;
end
endmodule